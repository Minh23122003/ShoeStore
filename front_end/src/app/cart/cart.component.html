<app-header></app-header>

<h1 class="text-center">Danh sách các đơn hàng đã đặt</h1>

<table class="table table-hover ms-auto me-auto" style="width: 70%;">
    <thead>
        <tr>
            <th>Tên sản phẩm</th>
            <th>Số lượng đặt</th>
            <th>Size</th>
            <th>Giá</th>
            <th>Tổng tiền</th>
            <th>Trạng thái</th>
            <th></th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @for (bill of bills; track bill.id) {
        <tr>
            <th>{{ bill.shoe.name }}</th>
            <th>{{ bill.quantity }}</th>
            <th>{{ bill.size }}</th>
            <th>{{ bill.shoe.price }}</th>
            <th>{{ bill.shoe.price * bill.quantity }}</th>
            <th>{{ bill.payment_at == null ? "Chưa thanh toán" : `Đã thanh toán vào ${bill.payment_at}` }}</th>
            <th>
                @if (bill.payment_at == null) {
                    <button (click)="pay(bill.id)" class="btn btn-primary">Thanh toán</button>
                }
                @else {
                    <button (click)="goToRating(bill.id)" class="btn btn-success">Đánh giá</button>
                }
            </th>
            <th>
                @if (bill.payment_at == null) {
                    <button (click)="deleteBill(bill.id)" class="btn btn-danger">Xóa</button>
                }
            </th>
        </tr>
        }
    </tbody>
</table>